<!DOCTYPE HTML>
<html>
<head>
    <script src="jquery-1.8.0.min.js"></script>
    <script src="jquery-ui-1.8.23.custom.min.js"></script>
    <script src="bootstrap.js"></script>
    <script src="canvas-css.js"></script>
    <script src="renderer.js"></script>
    <link href="bootstrap.css" rel="stylesheet"/>
    <link href="ui-lightness/jquery-ui-1.8.23.custom.css" rel="stylesheet"/>
    <link href="games.css" rel="stylesheet"/>
    <script>
        $(function() {
            $(".demo").each(function() {
                $(this).addClass("sheep grass dog wall tree player1 player2 player3 player4 scared barking barking-area arrow");
                var gameViewer = new GameViewer($(this));
                $.getJSON('./replays/' + $(this).attr("data-name") + '.json', function(data) {
                    gameViewer.setReplay(data.replay);
                    gameViewer.goToFrame(gameViewer.getMinFrame());
                })
            });
        });
    </script>
</head>
<body data-spy="scroll" data-target=".sidebar" >
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <a class="brand" href="#">SmartDog</a>
        <ul class="nav">
            <li><a href="/">Index</a></li>
            <li class="active"><a href="/rules.html">Rules</a></li>
        </ul>
    </div>
</div>
<div class="container rules">
    <div class="row">
        <div class="span3 sidebar ">
            <ul class="nav nav-list well" data-spy="affix" data-offset-top="0">
                <li class="active">
                    <a href="#intro">Вступление</a>
                </li>
                <li>
                    <a href="#rules">Правила</a>
                </li>
                <li class="l2"><a href="#map">Карта</a></li>
                <li class="l2"><a href="#goal">Цели игрока</a></li>
                <li class="l2"><a href="#scores">Подсчет очков</a></li>
                <li class="l2"><a href="#dogs">Поведение собак</a></li>
                <li class="l2"><a href="#sheeps">Поведение овец</a></li>
            </ul>
        </div>
        <div class="span9">

            <section id="intro">
                <h1>Вступление</h1>
                <p>smart dog создавался по образу и подобию google ai challenge, поэтому суть такая же: есть игра с несложными правилами, для которой нужно написать бота. Боты "сражаются" между собой, и по итогам сражений определяется победитель.
                </p>
                <p>Соревнование проходит в несколько фаз:
                </p>
                <ol>
                    <li>
                        <p><strong>Бета-тестирование (идет сейчас)</strong></p>

                        <p>Опубликована первая версия правил и игровой сервер. Можно писать ботов и участвовать в боях с другими игроками.
                        </p>
                        <p>цель этапа: тестирование сервера, оценка адекватности правил и предлагамых карт
                        </p>
                        <p>окончание этапа: ноябрь 2012
                        </p>
                    </li>
                    <li>
                        <p><strong>Подготовка</strong></p>

                        <p>Публикуется окончательная версия правил и игровой сервер, дальнейшие изменения в них исключаются, за исключением фикса багов.
                        </p>
                        <p>Цель этапа: дать участникам время подготовить и потестировать бота для соревнования
                        </p>

                    </li>
                    <li>
                        <p><strong>Турнир</strong></p>

                        <p>Создаются турнирные карты, производится запись на турнир. После чего проводится серия игр со всеми участниками турнира.
                        </p>
                        <p>Цель этапа: определить победителя!
                        </p>
                    </li>
                </ol>

            </section>
            <section id="rules">
                <h1>Правила игры</h1>
                smart-dog - пошаговая игра.
                Каждая партия ограничена по числу ходов, по достижению которого (и не раньше) игра заканчивается и определяется победитель
            </section>
            <section id="map">
                <h2>Карта</h2>


                <p>Есть двухмерная карта размерами от 2х2 до 1000х1000 клеток. Каждая клетка карты представляет собой один из следущих элементов ландшафта:
                </p>
                <ul>
                    <li>
                        <strong>Трава</strong> - по траве могут перемещаться игровые объекты
                    </li>
                    <li>
                        <strong>Забор, Дерево</strong> - по ним перемещаться нельзя
                    </li>
                    <li>
                        <strong>Загон</strong> - специальная область, привязанная к определенному игроку. Загон всегда имеет прямоугольную форму. На карте может быть более одного закона.
                    </li>
                </ul>

                <p>Кроме того на карте находятся игровые объекты, которые могут перемещаться:
            </p>
                <ul>
                    <li>
                        <strong>Собаки</strong> - от 1 особи на каждого игрока. Именно собаками управляет игрок.
                    </li>
                    <li>
                        <strong>Овцы</strong> - от 1 особи на каждого игрока. Овцы перемещаются самостоятельно, на их движение можно влиять только косвенно.
                    </li>
                </ul>
            </section>
            <section id="goal">
                <h2>Цель игрока</h2>


                <p>На момент последнего хода собрать как можно больше овец в своем загоне.</p>

            </section>
            <section id="scores">
                <h2>Подсчет очков</h2>


                <p>Очки подсчитываются по следующей формуле:</p>
                <pre>
score = &lt;оригинальное кол-во овец&gt; &gt; &lt;кол-во овец в загоне&gt;
        ? 5 * (&lt;оригинальное кол-во овец&gt; - &lt;кол-во овец в загоне&gt;) / &lt;оригинальное кол-во овец&gt;
        : 5 + 5 * (&lt;размер загона&gt; - &lt;кол-во овец в загоне&gt;) / &lt;размер загона&gt;</pre>
                <p>Если по-простому, то:
                <ul>
                <li>5 очков, если в загоне все овцы, которые были на территории игрока на начало игры</li>
                <li>10 очков, если загон полностью заполнен</li>
                </ul>
                </p>
            </section>
            <section id="dogs">
                <h2>Поведение собак</h2>
                <div class="pull-right well">
                    <canvas class="demo" data-name="dog_help"></canvas>
                </div>
                <ol>
                <li>За один ход собака может переместиться на 1 клетку в любую сторону не по диагонали, если на этой клетке нет собаки, овцы, забора или дерева.
                </li>
                <li>За один ход собака может гавкнуть один раз, причем можно сделать это до или после движения
                </li>
                <li>Если вражеская собака находится на расстоянии Н ходов от вашей и ваша собака гавкает, то:
                    <ul>
                        <li>Если ваша собака находится на территории вражеской собаки, то та обалдевает от такой наглости и не может гавкать ближайшие Н ходов, начиная со следующего</li>
                        <li>иначе вражеская собака пугается и не может ходить и гавкать ближайшие Н ходов, начиная со следующего</li>
                    </ul>
                </li>
                <li>Если две собаки гавкают одновременно, находясь на расстоянии Н и меньше, то указанное в пунктах 2 и 3 работает для обеих. Возможно, обе испугаются и застынут. Возможно одна из них только потеряет дар речи.
                </li>
                <li>Напуганная собака может быть перенапугана другой собакой. При этом предыдущее состояние забывается, т.к. у собак не очень с памятью - напуганную собаку вполне может отпустить, если она услышит лай со своей территории
                </li>
                <li>Собаки одного игрока не пугают друг друга
                </li>
                <li>Собака, гавкнувшая на расстоянии Н от другой собаки того же игрока, отменяерт испуг сделанный на предыдущих ходах.
                </li>
                <li>Если в один ход собака попадает под действие лая вражеской и своей собак, то приоритет у вражеской - собака пугается.
                </li>
                </ol>
                <div class="alert alert-danger">
                    Внимание: игроки делаюрт ход одновременно, поэтому если две собаки пытаются делать ход в одну и ту же клетку, то более быстрый игрок сделает это, а второму в ответ на команду move вернется предвпреждение
                </div>

            </section>
            <section id="sheeps">
                <h2>Поведение овец</h2>
                <div class="pull-right well">
                    <canvas class="demo" data-name="sheep"></canvas>
                    <canvas class="demo" data-name="dog_barks_sheep"></canvas>
                </div>
                <ol>
                <li>Овцы движутся каждые Н ходов (задается в конфигурации, по умолчанию 4). Это означает, что каждый ход, номер которого кратен Н, каждая овца делает один шаг, если есть такая возможность и овца не напугана
                </li>
                <li>На начало игры все овцы собираются двигаться вниз
                </li>
                <li>Если движение по выбранному направлению невозможнро, то овца пробует:
                    <ul>
                        <li>Повернуть налево (относительно оригинального направления)</li>
                        <li>Повернуть направо</li>
                        <li>Пойти назад</li>
                    </ul>
                </li>
                <li>Овца движется строго в одну сторону и меняет направление только если прямо не пройти, или если напугана
                </li>
                <li>Если собака гавкает на расстоянии от овцы, овца пугается и ближайшие ходов двигается без остановок в сторону противоположную той, откуда раздался лай.
                </li>
                <li>Уже испуганная овца может быть испугана другой или той же собакой по тем же правилам.
                </li>
                <li>Испуганная овца пугает овец в соседних клетках с ней (в том числе по диагонали), и те бегут от нее в течение Н ходов.
                </li>
                <li>Испуганная овца не может быть испугана испуганной овцой
                </li>
                <li>Если овца А была напугана вследствие испуга овцы Б (прямо или опосредованно через других овец), то овца Б не может быть испугана овцой А (для предотвращения цикличепских испугов). Считаем, что овцы неплохо помнят то, чего испугались.
                </li>
                </ol>
                <div class="well">
                    <canvas class="demo" data-name="dog_barks_sheep_cascade"></canvas>
                </div>
            </section>
            <section id="api">
                <h1>API</h1>
            </section>
            <section id="server">
                <h1>Официальный сервер</h1>
            </section>
            <section id="howtostart">
                <h1>С чего начать</h1>
            </section>
        </div>
    </div>

</div>

</body>
</html>